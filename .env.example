# Example environment variables for Gatify

# =========================
# Runtime (currently used)
# =========================

# Redis address used by gateway and integration tests (dev default).
# Production format example: redis://user:password@host:port
# Enable Redis password/authentication (AUTH/ACL) in production deployments.
REDIS_ADDR=localhost:6379

# Upstream backend to proxy to (gateway forwards /proxy/* here)
BACKEND_URL=http://localhost:8080

# Trust X-Forwarded-For for client IP extraction.
# Enable only when behind a trusted reverse proxy.
TRUST_PROXY=false

# Sliding-window defaults
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW_SECONDS=60

# Required to access /api/rules endpoints.
# ADMIN_API_TOKEN must be a long, random secret (32+ chars), never left as the
# default, rotated regularly, and never committed to source control or shared.
# Use a secrets manager in production. Leaving ADMIN_API_TOKEN="change-me"
# will expose /api/rules endpoints.
ADMIN_API_TOKEN=change-me

# =========================
# Optional / tests / planned
# =========================

# Used by analytics integration tests.
# Ensure the password portion of DATABASE_URL matches POSTGRES_PASSWORD to avoid
# test/compose failures.
DATABASE_URL=postgres://gatify:gatify_dev_password@localhost:5432/gatify?sslmode=disable

# Docker Compose database password override (must stay in sync with DATABASE_URL)
POSTGRES_PASSWORD=gatify_dev_password

# Planned (not yet wired into runtime):
LOG_LEVEL=info
MANAGEMENT_API_PORT=3001
ANALYTICS_ENABLED=true
ANALYTICS_BATCH_SIZE=100
ANALYTICS_FLUSH_INTERVAL=5s
